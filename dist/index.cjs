"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=(t=async(e,t)=>async function*(e){const t=e.getReader(),o=new TextDecoder;try{for(;;){const{done:e,value:r}=await t.read();if(e)return;yield JSON.parse(o.decode(r))}}finally{t.releaseLock()}}((await e("pubsub/sub",{arg:t},{timeout:!1})).body),(e,...o)=>t((e=>(t,o={},r={})=>{const s=new URLSearchParams(o),a=`${e.url}/${t}${s&&"?"+s}`;return e.fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},...r})})(e),...o));var t;var o=Object.freeze({__proto__:null,subscribe:e});exports.createClient=function(e={}){const{protocol:t="http",host:o="localhost",port:r=5001,path:s="api/v0",url:a=`${t}://${o}:${r}/${s}`,fetch:c=fetch,timeout:n=5e3}=e;return{url:a,fetch:(e,t)=>!1===t.timeout||!1===n?c(e,t):Promise.race([new Promise(((e,o)=>setTimeout((()=>o("Request timed out")),t.timeout||n))),c(e,t)])}},exports.pubsub=o;
//# sourceMappingURL=index.cjs.map
